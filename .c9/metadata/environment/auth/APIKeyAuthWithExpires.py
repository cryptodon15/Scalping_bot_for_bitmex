{"filter":false,"title":"APIKeyAuthWithExpires.py","tooltip":"/auth/APIKeyAuthWithExpires.py","undoManager":{"mark":0,"position":0,"stack":[[{"start":{"row":0,"column":0},"end":{"row":26,"column":16},"action":"insert","lines":["from requests.auth import AuthBase","import time","from market_maker.auth.APIKeyAuth import generate_signature","","","class APIKeyAuthWithExpires(AuthBase):","","    \"\"\"Attaches API Key Authentication to the given Request object. This implementation uses `expires`.\"\"\"","","    def __init__(self, apiKey, apiSecret):","        \"\"\"Init with Key & Secret.\"\"\"","        self.apiKey = apiKey","        self.apiSecret = apiSecret","","    def __call__(self, r):","        \"\"\"","        Called when forming a request - generates api key headers. This call uses `expires` instead of nonce.","        This way it will not collide with other processes using the same API Key if requests arrive out of order.","        For more details, see https://www.bitmex.com/app/apiKeys","        \"\"\"","        # modify and return the request","        expires = int(round(time.time()) + 5)  # 5s grace period in case of clock skew","        r.headers['api-expires'] = str(expires)","        r.headers['api-key'] = self.apiKey","        r.headers['api-signature'] = generate_signature(self.apiSecret, r.method, r.url, expires, r.body or '')","","        return r"],"id":1}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":26,"column":16},"end":{"row":26,"column":16},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1586590363280,"hash":"c49378b967f452b740c05b2aa062345b47739724"}